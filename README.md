# Стилер

Телеграм-бот, ворующий контент с других каналов. Копирует сообщения в канал/чат, стирая подписи. Постит по расписанию.

Компилируется Граалем, деплоится в Яндекс-функцию. Отложку хранит в Май-эс-кью-эль.

Логика в `src/stealer/handling.clj`.

Для сборки установите Лейнинген, Докер и заимейте Май-эс-кью-эль сервер.

Соберите нативный бинарь: 
```bash
docker pull ghcr.io/graalvm/native-image:22.2.0
make bash-package
```

После сборки сделайте бота, Яндекс-функцию и установите вебхук: 
```bash
make set-webhook token="<Токен бота>" id="<Айди Яндекс-функции>"
```

Создайте там же триггер-таймер для функции, напишите в нем крон-расписание постов.

Создайте таблицы на своем Май-эс-кью-эль-сервере:
```bash
make sql host=example.com user=example-user
```

Загрузите архив в функцию через обжект сторедж. 
Впишите в `handler.sh` параметры.
```bash
#! /bin/bash

./stealer-Linux-x86_64 "5631323282:AfZq11L..." "-10084234..." "-10045421..." "example-user@example.com:3306 password"
``` 

Дайте боту все нужные права в Телеге. Сделайте функцию публичной.

Пересылайте сообщения в бота, он будет стирать подписи и копировать все остальное по расписанию в указанный канал.

Обертку апи Телеги и код для Яндекс функции придумал [Иван Гришаев](https://grishaev.me), а я тупо скопировал.